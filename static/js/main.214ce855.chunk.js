(this["webpackJsonpinstant-notes-web"]=this["webpackJsonpinstant-notes-web"]||[]).push([[0],{31:function(e,t,n){e.exports=n(64)},36:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(26),o=n.n(r),i=n(5),c=n(6),u=n(8),p=n(7),l=n(4),d=n(9),h=(n(36),n(11)),g=n.n(h),m=n(3),f=n.n(m),b=n(27),v=n.n(b),w=n(15),E=(n(17),n(37),n(38),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(g.a,{fixed:!0},s.a.createElement(h.TopAppBarRow,null,s.a.createElement(h.TopAppBarSection,null,s.a.createElement(h.TopAppBarIcon,{navIcon:!0,tabIndex:0},s.a.createElement(f.a,{hasRipple:!0,icon:"notes"})),s.a.createElement(h.TopAppBarTitle,null,"Instant Notes")),this.props.parent.state.isLoggedIn?s.a.createElement(h.TopAppBarSection,null,s.a.createElement("div",{className:"header-username"},s.a.createElement(w.Button,{onClick:this.props.parent.doSessionLogout,style:{color:"white",textTransform:"none"},icon:s.a.createElement(f.a,{icon:"exit_to_app"})},this.props.parent.state.username))):""),s.a.createElement(v.a,{indeterminate:!0,closed:!this.props.parent.state.isLoading})))}}]),t}(a.Component)),S=n(10),L=n.n(S),y=n(12),O=n(28),k=(n(56),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={note:"",didSomethingWentWrong:!1,shared:!1,isSaving:!1},n.textArea=s.a.createRef(),n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.shareNote=n.shareNote.bind(Object(l.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.textArea.current.focus(),this.props.parent.startLoading(),L.a.post(this.props.parent.baseURL+"/api/",{username:this.props.parent.state.username,password:this.props.parent.state.password}).then((function(t){200===t.status&&(e.setState((function(e){return e.note=t.data.note,e})),e.props.parent.stopLoading())})).catch((function(t){console.log(t),e.props.parent.stopLoading()}))}},{key:"saveNote",value:function(){var e=this;this.props.parent.startLoading(),this.setState((function(e){return e.isSaving=!0,e})),L.a.post(this.props.parent.baseURL+"/api/",{username:this.props.parent.state.username,password:this.props.parent.state.password,note:this.state.note}).then((function(t){200===t.status&&(e.props.parent.stopLoading(),e.setState((function(e){return e.isSaving=!1,e})))})).catch((function(t){console.log(t),e.setState((function(e){return e.didSomethingWentWrong=!0,e.isSaving=!1,e})),e.props.parent.stopLoading()}))}},{key:"shareNote",value:function(){var e=this;this.props.parent.startLoading(),L.a.post(this.props.parent.baseURL+"/api/share/",{username:this.props.parent.state.username,password:this.props.parent.state.password}).then((function(t){if(200===t.status){e.props.parent.stopLoading();var n=t.data.share_url;navigator.clipboard.writeText(n),e.setState((function(e){return e.shared=!0,e}))}})).catch((function(t){console.log(t),e.setState((function(e){return e.didSomethingWentWrong=!0,e})),e.props.parent.stopLoading()}))}},{key:"handleChange",value:function(e){this.setState((function(t){return t.note=e.value,t})),this.state.isSaving||this.saveNote()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement("label",null,s.a.createElement("div",{className:"content"},s.a.createElement(f.a,{icon:"arrow_forward_ios"}),s.a.createElement("textarea",{ref:this.textArea,className:"content-input",value:this.state.note,onChange:function(t){return e.handleChange(t.currentTarget)}}))),this.state.didSomethingWentWrong?s.a.createElement(y.Snackbar,{message:"Sorry, something went wrong while saving your note.",onClose:function(){return e.setState((function(e){return e.didSomethingWentWrong=!1,e}))}}):""),s.a.createElement("div",{className:"fab"},s.a.createElement(O.Fab,{icon:s.a.createElement(f.a,{icon:"share"}),onClick:this.shareNote})),this.state.shared?s.a.createElement(y.Snackbar,{closeOnEscape:!0,actionText:"Okay",message:"Sharing link has been copied to clipboard.",onClose:function(){return e.setState((function(e){e.shared=!1}))}}):"")}}]),t}(a.Component)),j=n(13),C=n.n(j),W=n(29),x=n.n(W),I=n(30),P=(n(60),n(61),n(62),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={isPasswordWrong:!1,didSomethingWentWrong:!1,showPassword:!1},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.hideErrors=n.hideErrors.bind(Object(l.a)(n)),n.login=n.login.bind(Object(l.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.props.parent.setState((function(t){return t[e.name]=e.value,t}))}},{key:"hideErrors",value:function(){this.setState((function(e){return e.isPasswordWrong=!1,e.didSomethingWentWrong=!1,e}))}},{key:"login",value:function(){var e=this;this.props.parent.startLoading(),L.a.post(this.props.parent.baseURL+"/api/",{username:this.props.parent.state.username,password:this.props.parent.state.password}).then((function(t){200===t.status&&(e.props.parent.setState((function(e){return e.isLoggedIn=!0,e.isLoading=!1,e})),localStorage.setItem("username",e.props.parent.state.username),localStorage.setItem("password",e.props.parent.state.password))})).catch((function(t){401===t.response.status?e.setState((function(e){return e.isPasswordWrong=!0,e})):e.setState((function(e){return e.didSomethingWentWrong=!0,e})),e.props.parent.stopLoading()}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"login-component"},s.a.createElement(f.a,{icon:"account_circle"}),s.a.createElement("div",{style:{marginBottom:"50px"}},s.a.createElement(I.Overline,null,"Create your new credentials or enter existing.")),s.a.createElement(C.a,{label:"Username"},s.a.createElement(j.Input,{name:"username",id:"username",value:this.props.parent.state.username,onChange:function(t){return e.handleChange(t.currentTarget)}})),s.a.createElement(C.a,{label:"Password",trailingIcon:s.a.createElement(x.a,{style:{top:"4px"}},s.a.createElement(f.a,{icon:"remove_red_eye"})),onTrailingIconSelect:function(){return e.setState((function(e){return e.showPassword=!e.showPassword,e}))}},s.a.createElement(j.Input,{name:"password",type:this.state.showPassword?"text":"password",id:"password",value:this.props.parent.state.password,onChange:function(t){return e.handleChange(t.currentTarget)}})),s.a.createElement(w.Button,{raised:!0,icon:s.a.createElement(f.a,{icon:"lock_open"}),onClick:this.login},"Login"),this.state.isPasswordWrong?s.a.createElement(y.Snackbar,{message:"The password you entered is incorrect.",onClose:this.hideErrors}):"",this.state.didSomethingWentWrong?s.a.createElement(y.Snackbar,{message:"Sorry, something went wrong.",onClose:this.hideErrors}):"")}}]),t}(a.Component)),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).textArea=s.a.createRef(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.textArea.current.focus()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("label",null,s.a.createElement("div",{className:"content"},s.a.createElement(f.a,{icon:"arrow_forward_ios"}),s.a.createElement("span",{style:{fontFamily:"Roboto",position:"absolute"}},s.a.createElement("h2",{style:{display:"inline",paddingLeft:"5px"}},window.sharedPayload?window.sharedPayload.username:"")),s.a.createElement("textarea",{ref:this.textArea,className:"content-input",value:window.sharedPayload?window.sharedPayload.note:"",onChange:function(){},style:{backgroundColor:"white"}}))))}}]),t}(a.Component),T=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).baseURL="https://instant-notes.herokuapp.com",e.state={username:"",password:"",isLoggedIn:!1,isLoading:!1,hasPageLoaded:!1},e.doSessionLogout=e.doSessionLogout.bind(Object(l.a)(e)),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.trySessionLogin()}},{key:"startLoading",value:function(){this.setState((function(e){return e.isLoading=!0,e}))}},{key:"stopLoading",value:function(){this.setState((function(e){return e.isLoading=!1,e}))}},{key:"trySessionLogin",value:function(){var e=this;this.startLoading(),L.a.get(this.baseURL+"/api/").then((function(t){200===t.status&&e.setState((function(e){return e.username=t.data.username,e.password=t.data.password,e.isLoggedIn=!0,e.isLoading=!1,e.hasPageLoaded=!0,e}))})).catch((function(t){var n=localStorage.getItem("username"),a=localStorage.getItem("password");n&&a?e.setState((function(e){return e.username=n,e.password=a,e.isLoggedIn=!0,e})):e.stopLoading(),e.setState((function(e){return e.hasPageLoaded=!0,e.isLoading=!1,e}))}))}},{key:"doSessionLogout",value:function(){var e=this;this.startLoading(),localStorage.clear(),L.a.delete(this.baseURL+"/api/revoke/").then((function(t){200===t.status&&e.setState((function(e){return e.username="",e.password="",e.isLoggedIn=!1,e.isLoading=!1,e}))})).catch((function(t){e.stopLoading()}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(E,{parent:this}),window.sharedPayload?s.a.createElement(N,null):this.state.hasPageLoaded?this.state.isLoggedIn?s.a.createElement(k,{parent:this}):s.a.createElement(P,{parent:this}):"")}}]),t}(a.Component);n(63);o.a.render(s.a.createElement(T,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.214ce855.chunk.js.map